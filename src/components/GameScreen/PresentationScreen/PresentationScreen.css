/* PresentationScreen.css â€” detective placement with left/right + entry animations */

/* Root with full-height layout */
.root {
  position: relative;
  width: 100%;
  min-height: 100vh;
  background: #0e0e0e center / cover no-repeat;
  display: grid;
  place-items: center;
  padding: 0.833vw;

  opacity: 0;
  animation: bgFadeIn 280ms ease-out both;
}

/* Vignette overlay */
.root::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: rgba(0, 0, 0, 0.664);
  z-index: 0;

  opacity: 0;
  animation: overlayFadeIn 360ms ease-out 60ms both;
}

/* Panel */
.panel {
  font-family: "Metropolis";
  position: relative;
  z-index: 1;
  width: min(57.292vw, 94vw);
  display: grid;
  grid-template-rows: auto auto;
  gap: 0.75vw;
  border-radius: 0.729vw;
  padding: 0.75vw;
  backdrop-filter: blur(0.104vw) saturate(110%);

  opacity: 0;
  transform: translateY(0.625vw) scale(0.985);
  animation: panelIn 420ms cubic-bezier(0.2, 0.7, 0.2, 1) 220ms forwards;
}

/* Top: role card */
.cardSlot {
  display: grid;
  place-items: center;
  padding: 0.208vw;

  opacity: 0;
  transform: translateY(0.521vw);
  animation: floatIn 380ms cubic-bezier(0.2, 0.7, 0.2, 1) 300ms forwards;
}
.cardImage {
  /* fixed width in vw so it doesn't depend on the container */
  width: 46.875vw;
  height: auto;
  object-fit: contain;
  display: block;
  filter: drop-shadow(0 0.521vw 1.042vw rgba(0, 0, 0, 0.45));
}

/* Bottom row */
.textRow {
  display: grid;
  /* fixed vw columns for stability with zoom (two text boxes) */
  grid-template-columns: 33vw 19vw;
  gap: 0.75vw;
  align-items: start;

  opacity: 0;
  transform: translateY(0.417vw);
  animation: floatIn 420ms cubic-bezier(0.2, 0.7, 0.2, 1) 380ms forwards;
}

/* With ally chip: 3 fixed columns (left text, right text, avatar) */
.textRow--withChip {
  grid-template-columns: 30vw 18vw 7.5vw;
  gap: 0.75vw;
  align-items: center;
}

/* Solo/detective: centered and stable width */
.textRow:has(.textBox[data-solo="true"]) {
  grid-template-columns: minmax(0, 1fr) 0;
  justify-items: center;
}

/* Text boxes */
.textBox {
  font-family: "Metropolis";
  font-weight: 500;
  letter-spacing: 0.02em;
  font-size: 1vw;

  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;

  padding: 0.667vw 0.833vw;
  border-radius: 0.521vw;
  background: rgba(0, 0, 0, 0.425);
  color: #e6d7a6;

  box-sizing: border-box;
  height: 14.583vw; /* fixed height to avoid zoom jumps */
  line-height: 1.5;
  white-space: normal;
  word-break: break-word;
  hyphens: auto;
  overflow: auto;

  opacity: 0;
  transform: translateY(0.313vw) scale(0.995);
  animation: boxIn 420ms cubic-bezier(0.2, 0.7, 0.2, 1) 420ms forwards;
}
.textBox[data-variant="big"][data-det="true"],
.textBox[data-variant="big"][data-solo="true"] {
  height: 10.417vw;
}

/* Stagger */
.textRow .textBox:nth-child(1) {
  animation-delay: 420ms;
}
.textRow .textBox:nth-child(2) {
  animation-delay: 460ms;
}

/* Inline role colors */
.role-name {
  font-weight: 800;
}
.role-name.role-murderer {
  color: #ef4444;
}
.role-name.role-accomplice {
  color: #f59e0b;
}
.role-name.role-detective {
  color: #ffffff;
}

/* Do not push solo/detective with a left offset */
.solo-box,
.detective-box {
  position: relative;
  left: 0;
  right: auto;
  top: 0;
}

/* Ally chip column */
.ally-chipWrap {
  display: grid;
  place-items: center;
  width: 7.5vw; /* lock the column width */
  max-width: 7.5vw;

  opacity: 0;
  transform: translateY(0.313vw);
  animation: floatIn 380ms cubic-bezier(0.2, 0.7, 0.2, 1) 480ms forwards;
}
.ally-chip {
  display: grid;
  place-items: center;
  gap: 0.417vw;
  width: 100%;
}

/* ---------- FIX: stable name box above avatar ---------- */
.ally-name-box {
  font-family: "Metropolis";
  font-weight: 700;
  letter-spacing: 0.01em;

  /* lock size to avatar proportion */
  width: 7.188vw; /* same as avatar width */
  height: 1.875vw; /* fixed height for stability */
  box-sizing: border-box;
  padding: 0 0.417vw;

  /* single-line label that never grows the box */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  /* stable typography in vw */
  font-size: 0.78vw;
  line-height: 1.875vw; /* vertical centering */

  border-radius: 0.521vw;
  border: 0.052vw solid #000;
  box-shadow: 0 0.052vw 0.104vw rgb(0 0 0 / 0.06),
    0 0.052vw 0.052vw -0.052vw rgb(0 0 0 / 0.08);
  color: #111;
  text-align: center;
}
.ally-name-box[data-role="murderer"] {
  background: #ef4444;
  color: #fff;
}
.ally-name-box[data-role="accomplice"] {
  background: #f59e0b;
  color: #1a1a1a;
}
.ally-name-box[data-role="detective"] {
  background: #e6d7a6;
  color: #1a1a1a;
}

/* Avatar */
.ally-avatar-circle {
  position: relative;
  width: 7.188vw;
  height: 7.188vw;
  border-radius: 999px;
  overflow: hidden;
  background: #cbd5e1;
  --ring-color: #9ca3af;
  --ring-width: 0.208vw;
  --ring-glow-blur: 0.938vw;
  --ring-glow-spread: 0.313vw;
  border: 0.052vw solid #000;
  box-shadow: 0 0 0 var(--ring-width) var(--ring-color),
    0 0 0 calc(var(--ring-width) + 0.052vw) #000,
    0 0 var(--ring-glow-blur) var(--ring-glow-spread) var(--ring-color),
    0 0.521vw 0.781vw -0.156vw rgb(0 0 0 / 0.1),
    0 0.208vw 0.313vw -0.208vw rgb(0 0 0 / 0.1);
}
@supports (color: color-mix(in oklab, #000 50%, transparent)) {
  .ally-avatar-circle {
    --ring-glow: color-mix(in oklab, var(--ring-color) 55%, transparent);
    box-shadow: 0 0 0 var(--ring-width) var(--ring-color),
      0 0 0 calc(var(--ring-width) + 0.052vw) #000,
      0 0 var(--ring-glow-blur) var(--ring-glow-spread) var(--ring-glow),
      0 0.521vw 0.781vw -0.156vw rgb(0 0 0 / 0.1),
      0 0.208vw 0.313vw -0.208vw rgb(0 0 0 / 0.1);
  }
}
.ally-avatar-circle.no-glow {
  box-shadow: 0 0 0 var(--ring-width) var(--ring-color),
    0 0 0 calc(var(--ring-width) + 0.052vw) #000;
}
.ally-avatar-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

/* Ready button row */
.readyRow {
  display: flex;
  justify-content: center;
  padding-top: 0;
  opacity: 0;
  transform: translateY(0.313vw);
  animation: floatIn 360ms cubic-bezier(0.2, 0.7, 0.2, 1) 520ms forwards;
}
.readyButton {
  font-family: "Metropolis";
  font-weight: 1000;
  text-transform: uppercase;
  font-size: 1vw;

  padding: 0.625vw 0.833vw;
  border-radius: 0.521vw;
  border: 0.052vw solid #000;

  background: #e6d7a6;
  color: #1a1a1a;
  box-shadow: 0 0.052vw 0.104vw rgb(0 0 0 / 0.15),
    0 0.208vw 0.521vw rgb(0 0 0 / 0.15);
  cursor: pointer;
  transition: transform 120ms ease, filter 120ms ease, box-shadow 120ms ease;

  position: relative;
  isolation: isolate;
}
.readyButton::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 0.521vw;
  padding: 0.104vw 0.208vw;
  pointer-events: none;
  z-index: -1;
  background: linear-gradient(90deg, #f4e1a3, #fff7d1, #f4e1a3);
  -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor;
  mask-composite: exclude;
  opacity: 0;
  filter: blur(0.026vw);
  transform: scale(1);
  transition: opacity 160ms ease, filter 160ms ease, transform 160ms ease;
}
.readyButton:hover {
  transform: translateY(-0.052vw) scale(1.06);
  box-shadow: 0 0.156vw 0.313vw rgb(0 0 0 / 0.22),
    0 0.521vw 1.146vw rgb(0 0 0 / 0.22);
  filter: brightness(1.05);
}
.readyButton:hover::before {
  opacity: 1;
  filter: blur(0.104vw);
  transform: scale(1.04);
}
.readyButton:active {
  transform: translateY(0) scale(1);
  filter: brightness(0.98);
}
.readyButton:focus-visible::before {
  opacity: 1;
  filter: blur(0.083vw);
  transform: scale(1.02);
}

/* Animations */
@keyframes bgFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes overlayFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
@keyframes panelIn {
  from {
    opacity: 0;
    transform: translateY(0.625vw) scale(0.985);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}
@keyframes floatIn {
  from {
    opacity: 0;
    transform: translateY(0.417vw);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}
@keyframes boxIn {
  from {
    opacity: 0;
    transform: translateY(0.313vw) scale(0.995);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .root,
  .root::before,
  .panel,
  .cardSlot,
  .textRow,
  .textBox,
  .ally-chipWrap,
  .readyRow {
    animation: none !important;
    transform: none !important;
    opacity: 1 !important;
  }
}
